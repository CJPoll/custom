# Hypridle Configuration
# Cyberpunk theme idle management

general {
    lock_cmd = pidof hyprlock || hyprlock       # Lock command - avoid starting multiple instances
    before_sleep_cmd = loginctl lock-session    # Lock before sleep (lid close, systemd sleep)
    after_sleep_cmd = hyprctl dispatch dpms on  # Turn on display after sleep
    ignore_dbus_inhibit = false                 # Respect inhibitors (e.g., during video playback)
}

# Listener 1: Lock screen after 5 minutes of idle
listener {
    timeout = 300                               # 5 minutes in seconds
    on-timeout = loginctl lock-session          # Lock the session (triggers hyprlock via lock_cmd)
    on-resume = notify-send "Welcome back!"     # Optional: notify when activity resumes
}

# Listener 2: Turn off monitors after 30 minutes of lock screen idle
# Note: This counts from the START of idle, so 30 min total = 25 min after lock
listener {
    timeout = 1800                              # 30 minutes total (5 min lock + 25 min more)
    on-timeout = hyprctl dispatch dpms off      # Turn off displays
    on-resume = hyprctl dispatch dpms on        # Turn displays back on when activity resumes
}

# Note: No sleep listener configured per user request
# If you need to prevent system sleep entirely, configure that in systemd:
#   sudo systemctl mask sleep.target suspend.target hibernate.target hybrid-sleep.target
